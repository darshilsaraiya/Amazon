<!DOCTYPE html>
<html>
  <head>
    <title>Amazon-Fresh</title>
    <% include lib.ejs %>

          <script>
                angular.module('addressModule', []).controller('addressController', function($scope, $http, $location) {
                  
                  $scope.updateAddress = function(){
                    console.log($scope.zipCode);
                    var data = {
                        address: $scope.address,
                        zipcode: $scope.zipcode,
                        city: $scope.city,
                        state: $scope.state
                      };

                    $http({
                      method: "POST",
                      url: '/user/address/update',
                      data: data
                    }).success(function(res){
                      if(res){
                        console.log(res.data);
                        window.location.assign('/customerAccount');
                      }
                    });
                  }

                  $scope.getAddress = function(){
          $http({
            method: "GET",
            url: '/user/address'
          }).success(function(res){
            if(res.status == 200){
              console.log(res.data);
              $scope.user = res.data;
              $scope.state = res.data[0].state;
              $scope.address = res.data[0].address;
              $scope.city = res.data[0].city;
              $scope.zipcode = res.data[0].zipcode;
              $scope.card_number = res.data[0].zipcode;
              
            }
          });
        }

              });
              </script>



  </head>
  <body ng-app="addressModule" ng-controller="addressController" ng-init="getAddress();">
    <% include menu1.ejs %>
    <div style="height: 50px; display: block;"></div>
        <div class="container-fluid">


                  <h3>
                  Address Details
                </h3>
                <div class="row">
                  <div class="col-md-3"></div>
                  <div class="col-md-6">
                    <div class="thumbnail thumbnail-credit-card">

                <div class="row">

                  <div class="col-md-12">

                    <div class="form-group">
                      <label for="address">
                        Address
                      </label>
                      <textarea class="form-control textbox-address"  placeholder="Address" ng-model="address" ></textarea>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="city">
                        City
                      </label>
                      <input type="text" class="form-control" placeholder="City" ng-model="city" />
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="state">
                        State
                      </label>
                      <input type="text" class="form-control" placeholder="State" ng-model="state" />
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label for="zip">
                        Zip
                      </label>
                      <input type="text" class="form-control" placeholder="Zip" ng-model="zipcode" />
                    </div>
                  </div>
                </div>

                </div>
                </div>


          
                
 
                  <div class="col-md-3"></div>
                </div>
                <hr>
                
                <div class="row">
                  <div class="col-md-3"></div>
                  <div class="col-md-6">
                      <button type="button" class="btn btn-primary btn-block" ng-click="updateAddress();">Update Address Details</button>

                  </div>
                  <div class="col-md-2"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
    </div>
    <div class="col-md-1"></div>
  </div>

         </div>
 

    <% include footer.ejs %>
    <% include js-lib.ejs %>
  </body>
</html>
